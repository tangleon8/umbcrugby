<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="assets/images/rugbylogo.png" type="image/png" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <script src="js/scripts.js" defer></script>
  <!-- Optional Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
    rel="stylesheet"
  />
  <title>UMBC Rugby Home</title>

   <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="UMBC Rugby Club" />
  <meta property="og:description" content="Building brotherhood since 1984." />
  <meta property="og:image" content="https://ugc.production.linktr.ee/d38ecb41-e2ef-461c-8d63-687e073c054d_DSC-3383.jpeg?io=true&size=avatar-v3_0" />
  <meta property="og:url" content="https://umbcrugby.com" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="UMBC Rugby Club" />

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="UMBC Rugby Club" />
  <meta name="twitter:description" content="Building brotherhood since 1984." />
  <meta name="twitter:image" content="https://ugc.production.linktr.ee/d38ecb41-e2ef-461c-8d63-687e073c054d_DSC-3383.jpeg?io=true&size=avatar-v3_0" />
</head>
<body>
  <!-- UMBC Rugby Loading Screen -->
  <div id="umbc-loading-screen" class="umbc-loading-screen">
    <div class="loading-content">
      <img src="assets/images/rugbylogo.png" alt="UMBC Rugby Logo" class="loading-logo">
      <h1 class="loading-title">UMBC Rugby</h1>
      <p class="loading-subtitle">Building Brotherhood Since 1984</p>
      
      <div class="rugby-field-progress">
        <div class="field-lines">
          <div class="yard-line"></div>
          <div class="yard-line"></div>
          <div class="yard-line center"></div>
          <div class="yard-line"></div>
          <div class="yard-line"></div>
        </div>
        <div class="rugby-ball"></div>
      </div>
      
      <div class="progress-percentage">0%</div>
      <div class="loading-status">Initializing...</div>
    </div>
  </div>

  <!-- Back to Top Button -->
  <button id="back-to-top" title="Back to Top">‚Üë</button>

  <!-- HEADER -->
  <header id="hero-header">
    <!-- Background Videos -->
    <video
      id="header-video-1"
      class="header-video active"
      autoplay
      muted
      playsinline
      webkit-playsinline
    >
      <source src="assets/videos/umbcrugby1.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    
    <video
      id="header-video-2"
      class="header-video"
      muted
      loop
      playsinline
      webkit-playsinline
    >
      <source src="assets/videos/UMBC Video.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>

    <!-- Gradient Overlay -->
    <div class="hero-overlay"></div>

    <!-- Hero Content -->
    <div class="hero-content" data-aos="fade-up">
      <img src="assets/images/rugbylogo.png" alt="UMBC Rugby Logo" class="hero-logo" />
      <h1 class="hero-title">UMBC Rugby Club</h1>
      <div class="hero-animated-text">
        <p class="hero-subtitle animated-subtitle" style="color: white;">Building Brotherhood Since 1984</p>
        <p class="hero-description animated-description">The Only Contact Sport at UMBC</p>
      </div>
      <a href="#about" class="cta-button transparent-btn small-btn">Learn More</a>
    </div>
  </header>

  <!-- NAVIGATION: Placed AFTER header to avoid overlapping the video -->
  <nav id="navbar" class="hero-nav" role="navigation">
    <ul>
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="roster.html">Roster</a></li>
      <li><a href="schedule.html">Schedule</a></li>
      <li><a href="rugby-ready.html">Rugby Ready</a></li>
      <li><a href="recruitment.html">Recruitment</a></li>
      <li><a href="alumni.html">Alumni</a></li>
      <li><a href="donate.html">Donate</a></li>
      <li><a href="faq.html">FAQs</a></li>
      <li><button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">üåô</button></li>
    </ul>
  </nav>

  <!-- Main Content -->
  <main>
    <!-- About Section -->
    <section id="about" class="about-section transparent-section" data-aos="fade-up" data-aos-duration="1200">
      <div class="container">
        <h2 class="section-title" data-aos="slide-down" data-aos-duration="800" data-aos-easing="ease-out-back">About UMBC Rugby</h2>
        <div class="about-content">
          <div class="about-text" data-aos="slide-right" data-aos-duration="1000" data-aos-delay="200" data-aos-easing="ease-out-cubic">
            <p data-aos="fade-in" data-aos-delay="400" data-aos-duration="800" data-aos-easing="ease-out-quart">
              Founded in 1984, the UMBC Men's Rugby Club is the only contact sport at UMBC
              and is a proud member of the National Collegiate Rugby Division II. We are dedicated
              to excellence in competition and fostering a community of inclusivity and sportsmanship
              on and off the field.
            </p>
            <p data-aos="fade-in" data-aos-delay="600" data-aos-duration="800" data-aos-easing="ease-out-quart">
              Our mission is to develop skilled athletes, supportive teammates, and
              responsible leaders through the sport of rugby. Whether you're new to
              rugby or an experienced player, UMBC Rugby offers a welcoming
              environment to grow.
            </p>
            <p data-aos="fade-in" data-aos-delay="800" data-aos-duration="800" data-aos-easing="ease-out-quart">
              Join us today and be part of our tradition of passion and pride that
              enriches campus life and personal growth.
            </p>
            <a href="recruitment.html" class="cta-button" data-aos="flip-up" data-aos-delay="1000" data-aos-duration="600" data-aos-easing="ease-out-back">Join The Team</a>
          </div>
          <div class="about-image" data-aos="slide-left" data-aos-duration="1000" data-aos-delay="200" data-aos-easing="ease-out-cubic">
            <img
              src="assets/images/Latchana_Rugby1.jpg"
              alt="UMBC Rugby Team Photo"
              class="team-photo"
              data-aos="zoom-in-rotate" data-aos-delay="600" data-aos-duration="1000" data-aos-easing="ease-out-back"
            />
          </div>
        </div>
      </div>
    </section>


    <!-- Image Carousel Section -->
    <section id="image-carousel" class="info-section transparent-section" data-aos="fade-up" data-aos-duration="1500" data-aos-easing="ease-out-cubic">
      <div class="carousel-container" data-aos="zoom-in" data-aos-delay="200" data-aos-duration="1000">
        <!-- Carousel Track -->
        <div class="carousel-track">
          <img src="assets/images/Latchana_Rugby1.jpg" alt="UMBC Rugby Since 1984" class="carousel-image" data-aos="flip-left" data-aos-delay="100" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/Latchana_rubgy2.jpg" alt="Rugby Action Shot 1" class="carousel-image" data-aos="flip-right" data-aos-delay="200" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/Latchana_Rugby4.jpg" alt="Rugby Action Shot 2" class="carousel-image" data-aos="flip-left" data-aos-delay="300" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/IMG_7442.jpeg" alt="Rugby Team Spirit" class="carousel-image" data-aos="flip-right" data-aos-delay="400" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/Latchana_Rugby52.jpg" alt="Rugby Excellence" class="carousel-image" data-aos="flip-left" data-aos-delay="500" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/umbuc1.jpg" alt="Team Unity" class="carousel-image" data-aos="flip-right" data-aos-delay="600" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/umbuc2.jpg" alt="Rugby Pride" class="carousel-image" data-aos="flip-left" data-aos-delay="700" data-aos-duration="800" data-aos-easing="ease-out-back" />
          <img src="assets/images/umbuc3.jpg" alt="Championship Spirit" class="carousel-image" data-aos="flip-right" data-aos-delay="800" data-aos-duration="800" data-aos-easing="ease-out-back" />

        </div>

        <!-- Navigation Buttons -->
        <button class="carousel-btn prev" aria-label="Previous Slide" data-aos="slide-right" data-aos-delay="400" data-aos-duration="600">‚Üê</button>
        <button class="carousel-btn next" aria-label="Next Slide" data-aos="slide-left" data-aos-delay="400" data-aos-duration="600">‚Üí</button>

        <!-- Carousel Indicators -->
        <div class="carousel-indicators" data-aos="fade-up" data-aos-delay="600" data-aos-duration="800">
          <span data-slide="0" class="indicator active" data-aos="zoom-in" data-aos-delay="700"></span>
          <span data-slide="1" class="indicator" data-aos="zoom-in" data-aos-delay="750"></span>
          <span data-slide="2" class="indicator" data-aos="zoom-in" data-aos-delay="800"></span>
          <span data-slide="3" class="indicator" data-aos="zoom-in" data-aos-delay="850"></span>
          <span data-slide="4" class="indicator" data-aos="zoom-in" data-aos-delay="900"></span>
          <span data-slide="5" class="indicator" data-aos="zoom-in" data-aos-delay="950"></span>
          <span data-slide="6" class="indicator" data-aos="zoom-in" data-aos-delay="1000"></span>
          <span data-slide="7" class="indicator" data-aos="zoom-in" data-aos-delay="1050"></span>

        </div>
      </div>

      <!-- Modal -->
      <div class="modal">
        <span class="close-modal">√ó</span>
        <img class="modal-content" alt="Expanded Rugby Image" />
      </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="transparent-section" data-aos="fade-up" data-aos-duration="1200" data-aos-easing="ease-out-cubic">
      <h2>What Our Players Say</h2>
      <blockquote>
        "Rugby is the ultimate team sport! It combines the best of both sports I played growing up,
        football and soccer." ‚Äì <strong>Kyle P</strong>.
      </blockquote>
      <blockquote>
        "I played four Varsity sports in High School and have always been competitive. I decided
        to give rugby a try (pun intended) in Fall '23 and have fallen in love with the
        competitive nature of the game, the strategy behind it, and the brotherhood that
        is UMBC Men's Club Rugby." ‚Äì <strong>The Legend</strong>
      </blockquote>
    </section>

    <!-- Instagram Feed Section -->
    <section id="instagram-feed" class="transparent-section" data-aos="fade-up" data-aos-duration="800" data-aos-easing="ease-out-cubic">
      <h2 class="section-title" data-aos="fade-right" data-aos-duration="1000" data-aos-easing="ease-out-back">
        Follow Us on Instagram
      </h2>
      <p data-aos="fade-left" data-aos-duration="1200" data-aos-delay="200" data-aos-easing="ease-out-quart">
        Stay connected and see the latest moments from UMBC Rugby.
      </p>
      <div style="max-width: 900px; margin: auto; padding: 20px; text-align: center;" data-aos="zoom-in" data-aos-delay="400" data-aos-duration="1000" data-aos-easing="ease-out-back">
        <blockquote class="instagram-media"
          data-instgrm-permalink="https://www.instagram.com/umbcmensrugby/"
          data-instgrm-version="14"
          style="width: 100%; max-width: 800px; margin: 0 auto; border-radius: 12px; overflow: hidden;"
        >
          <div style="padding: 16px;">Loading...</div>
        </blockquote>
      </div>
      <script async src="https://www.instagram.com/embed.js"></script>
    </section>



    <!-- Scrolling Player Section -->
    <section id="scrolling-player-section" class="transparent-section" data-aos="fade-up" data-aos-duration="1000" data-aos-easing="ease-out-cubic">
      <div class="caption" data-aos="zoom-in" data-aos-duration="800" data-aos-easing="ease-out-back">
        <h2>Catch the Kick</h2>
      </div>
      <div class="player-container" data-aos="slide-up" data-aos-duration="1200" data-aos-delay="300" data-aos-easing="ease-out-quart">
        <img
          src="assets/images/nate.png"
          alt="Rugby Player Kicking"
          class="player-image"
          data-aos="rotate-in" data-aos-delay="600" data-aos-duration="1000" data-aos-easing="ease-out-back"
        />
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer data-aos="fade-up" data-aos-duration="1000" data-aos-easing="ease-out-cubic">
    <!-- Logo -->
    <div class="footer-logo" data-aos="zoom-in" data-aos-delay="200" data-aos-duration="800">
      <img src="assets/images/rugbylogo.png" alt="UMBC Rugby Logo" data-aos="flip-left" data-aos-delay="300" />
      <img src="assets/images/ncr.png" alt="NCR Logo" data-aos="flip-up" data-aos-delay="400" />
      <img src="assets/images/umbclogo.png" alt="UMBC Logo" data-aos="flip-right" data-aos-delay="500" />
    </div>

    <!-- Footer Navigation Links -->
    <nav class="footer-nav" data-aos="slide-up" data-aos-delay="300" data-aos-duration="800">
      <ul>
        <li data-aos="fade-in" data-aos-delay="400"><a href="index.html">Home</a></li>
        <li data-aos="fade-in" data-aos-delay="450"><a href="roster.html">Roster</a></li>
        <li data-aos="fade-in" data-aos-delay="500"><a href="schedule.html">Schedule</a></li>
        <li data-aos="fade-in" data-aos-delay="550"><a href="rugby-ready.html">Rugby Ready</a></li>
        <li data-aos="fade-in" data-aos-delay="600"><a href="recruitment.html">Recruitment</a></li>
        <li data-aos="fade-in" data-aos-delay="650"><a href="alumni.html">Alumni</a></li>
        <li data-aos="fade-in" data-aos-delay="700"><a href="donate.html">Donate</a></li>
        <li data-aos="fade-in" data-aos-delay="750"><a href="faq.html">FAQs</a></li>
      </ul>
    </nav>

    <!-- Copyright -->
    <p data-aos="fade-in" data-aos-delay="600" data-aos-duration="800">&copy; 2025 UMBC Rugby Club. Web Design made by Leon Tang.</p>
  </footer>

  <!-- AOS Library -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    // Initialize AOS with enhanced settings
    AOS.init({
      duration: 1000,
      easing: 'ease-out-cubic',
      once: false,
      offset: 120,
      delay: 0,
      anchorPlacement: 'top-bottom',
      disable: function() {
        return window.innerWidth < 768;
      }
    });


    // Enhanced Video Transition Handler
    function initVideoTransition() {
        const video1 = document.getElementById('header-video-1');
        const video2 = document.getElementById('header-video-2');
        let currentVideo = 1;
        let transitionInterval;
        
        if (video1 && video2) {
            // Ensure first video starts playing immediately
            video1.play().catch(e => console.log('Video autoplay prevented:', e));
            
            function switchToVideo2() {
                video1.classList.remove('active');
                video2.classList.add('active');
                video2.play().catch(e => console.log('Second video play prevented:', e));
                currentVideo = 2;
                
                // Switch back to first video after 5 seconds
                setTimeout(switchToVideo1, 5000);
            }
            
            function switchToVideo1() {
                video2.classList.remove('active');
                video1.classList.add('active');
                video1.play().catch(e => console.log('First video play prevented:', e));
                currentVideo = 1;
                
                // Switch to second video after 8 seconds (longer duration)
                setTimeout(switchToVideo2, 8000);
            }
            
            // Start the cycle - first video plays for 8 seconds, then switch
            setTimeout(switchToVideo2, 8000);
            
            // Handle video end events to maintain smooth looping
            video1.addEventListener('ended', () => {
                video1.currentTime = 0;
                if (currentVideo === 1) {
                    video1.play().catch(e => console.log('Video replay prevented:', e));
                }
            });
            
            video2.addEventListener('ended', () => {
                video2.currentTime = 0;
                if (currentVideo === 2) {
                    video2.play().catch(e => console.log('Video replay prevented:', e));
                }
            });
        }
    }
    
    // Typewriter Effect
    function typeWriter(element, text, speed = 50) {
        let i = 0;
        element.innerHTML = '';
        
        function type() {
            if (i < text.length) {
                element.innerHTML += text.charAt(i);
                i++;
                setTimeout(type, speed);
            }
        }
        type();
    }
    
    // Typewriter effects removed for better performance

// Enhanced JavaScript for UMBC Rugby Website
document.addEventListener('DOMContentLoaded', function() {

    // Dark Mode Toggle
    const themeToggle = document.getElementById('theme-toggle');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme') || 'light';
    
    // Set initial theme
    body.setAttribute('data-theme', currentTheme);
    themeToggle.textContent = currentTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    
    themeToggle.addEventListener('click', () => {
        const newTheme = body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    });

    // Initialize AOS with custom settings
    if (typeof AOS !== 'undefined') {
        AOS.init({
            duration: 1000,
            easing: 'ease-out-cubic',
            once: false,
            offset: 100,
            delay: 100
        });
    }

    // Enhanced Navbar Scroll Effects
    const navbar = document.getElementById('navbar');
    let lastScroll = 0;

    window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;

        // Add scrolled class for navbar styling
        if (currentScroll > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }

        // Hide/show navbar on scroll
        if (currentScroll > lastScroll && currentScroll > 500) {
            navbar.style.transform = 'translateY(-100%)';
        } else {
            navbar.style.transform = 'translateY(0)';
        }

        lastScroll = currentScroll;
    });

    // Enhanced Carousel with Touch Support
    const initCarousel = () => {
        const track = document.querySelector('.carousel-track');
        const images = Array.from(track.children);
        const prevButton = document.querySelector('.carousel-btn.prev');
        const nextButton = document.querySelector('.carousel-btn.next');
        const indicators = document.querySelectorAll('.indicator');
        const modal = document.querySelector('.modal');
        const modalImg = document.querySelector('.modal-content');
        const closeModal = document.querySelector('.close-modal');

        let currentIndex = 0;
        let autoScrollInterval;
        let touchStartX = 0;
        let touchEndX = 0;

        const updateCarousel = () => {
            track.style.transform = `translateX(-${currentIndex * 100}%)`;
            indicators.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
        };

        const startAutoScroll = () => {
            autoScrollInterval = setInterval(() => {
                currentIndex = (currentIndex + 1) % images.length;
                updateCarousel();
            }, 4000);
        };

        const stopAutoScroll = () => clearInterval(autoScrollInterval);

        // Navigation
        nextButton.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % images.length;
            updateCarousel();
            stopAutoScroll();
            startAutoScroll();
        });

        prevButton.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            updateCarousel();
            stopAutoScroll();
            startAutoScroll();
        });

        // Indicators
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                currentIndex = index;
                updateCarousel();
                stopAutoScroll();
                startAutoScroll();
            });
        });

        // Modal functionality with enhanced animations
        images.forEach((img) => {
            img.addEventListener('click', () => {
                modal.style.display = 'flex';
                modal.classList.add('show');
                modalImg.src = img.src;
                document.body.style.overflow = 'hidden';
            });
        });

        const closeModalFunc = () => {
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
                document.body.style.overflow = '';
            }, 300);
        };

        closeModal.addEventListener('click', closeModalFunc);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModalFunc();
        });

        // Enhanced touch support
        track.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            stopAutoScroll();
        });

        track.addEventListener('touchmove', (e) => {
            touchEndX = e.touches[0].clientX;
        });

        track.addEventListener('touchend', () => {
            const swipeDistance = touchStartX - touchEndX;
            const threshold = 50;

            if (Math.abs(swipeDistance) > threshold) {
                if (swipeDistance > 0) {
                    // Swipe left
                    currentIndex = (currentIndex + 1) % images.length;
                } else {
                    // Swipe right
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                }
                updateCarousel();
            }
            startAutoScroll();
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (modal.style.display === 'flex') {
                if (e.key === 'Escape') closeModalFunc();
            } else {
                if (e.key === 'ArrowRight') {
                    currentIndex = (currentIndex + 1) % images.length;
                    updateCarousel();
                } else if (e.key === 'ArrowLeft') {
                    currentIndex = (currentIndex - 1 + images.length) % images.length;
                    updateCarousel();
                }
            }
        });

        // Start autoplay
        startAutoScroll();
        track.addEventListener('mouseenter', stopAutoScroll);
        track.addEventListener('mouseleave', startAutoScroll);
    };

    if (document.querySelector('.carousel-track')) {
        initCarousel();
    }

    // Enhanced Back to Top Button
    const backToTopBtn = document.getElementById('back-to-top');
    if (backToTopBtn) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > 500) {
                backToTopBtn.style.display = 'flex';
                backToTopBtn.style.animation = 'fadeInUp 0.5s ease';
            } else {
                backToTopBtn.style.animation = 'fadeOutDown 0.5s ease';
                setTimeout(() => {
                    if (window.scrollY <= 500) {
                        backToTopBtn.style.display = 'none';
                    }
                }, 500);
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }

    // Centered Spinning Rugby Player with Scroll-Based Movement
    const playerImage = document.querySelector('.player-image');
    const playerSection = document.getElementById('scrolling-player-section');
    let lastScrollY = window.scrollY;
    let scrollDirection = 0; // -1 for up, 1 for down
    let continuousRotation = 0; // For continuous spinning
    
    if (playerImage && playerSection) {
        // Center the player initially
        playerImage.style.left = '50%';
        playerImage.style.transform = 'translateX(-50%)';
        
        function updatePlayerMovement() {
            const currentScrollY = window.scrollY;
            
            // Detect scroll direction
            if (currentScrollY > lastScrollY) {
                scrollDirection = 1; // scrolling down
            } else if (currentScrollY < lastScrollY) {
                scrollDirection = -1; // scrolling up
            }
            lastScrollY = currentScrollY;
            
            // Get section position relative to viewport
            const rect = playerSection.getBoundingClientRect();
            const viewportHeight = window.innerHeight;
            
            // Only animate when section is visible
            if (rect.top < viewportHeight && rect.bottom > 0) {
                // Calculate section visibility progress
                const sectionProgress = Math.max(0, Math.min(1, 
                    (viewportHeight - rect.top) / (viewportHeight + rect.height)
                ));
                
                // Continuous spinning animation based on scroll
                continuousRotation += scrollDirection * 8; // 8 degrees per scroll step
                
                // Vertical movement based on scroll direction
                const scrollVerticalMovement = scrollDirection * 30; // Move up/down based on scroll
                
                // Base vertical position with bobbing
                const baseBobbing = Math.sin(sectionProgress * Math.PI * 4) * 15; // More frequent bobbing
                const finalVerticalPos = baseBobbing + scrollVerticalMovement;
                
                // Horizontal oscillation while staying centered
                const horizontalOscillation = Math.sin(continuousRotation * 0.05) * 50; // Side to side movement
                
                // Scale based on section visibility with pulsing effect
                const baseScale = 0.9 + (sectionProgress * 0.3);
                const pulsingScale = baseScale + Math.sin(continuousRotation * 0.1) * 0.1;
                
                // Apply all transforms: center + oscillation, vertical movement, scale, continuous rotation
                playerImage.style.transform = `
                    translateX(calc(-50% + ${horizontalOscillation}px)) 
                    translateY(${finalVerticalPos}px) 
                    scale(${pulsingScale}) 
                    rotate(${continuousRotation}deg)
                `;
                
                // Opacity based on section visibility
                playerImage.style.opacity = Math.max(0.4, sectionProgress * 1.3);
                
                // Add glow effect during spinning
                const glowIntensity = Math.abs(scrollDirection) * 15 + 10;
                playerImage.style.filter = `drop-shadow(0 0 ${glowIntensity}px rgba(255, 184, 28, 0.6)) brightness(${1 + Math.abs(scrollDirection) * 0.1})`;
            }
        }
        
        // High-frequency animation for smooth spinning
        let ticking = false;
        function requestTick() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    updatePlayerMovement();
                    ticking = false;
                });
                ticking = true;
            }
        }
        
        // Add scroll listener
        window.addEventListener('scroll', requestTick);
        
        // Initial call
        updatePlayerMovement();
        
        // Continuous spinning animation even when not scrolling
        setInterval(() => {
            if (Math.abs(scrollDirection) < 0.1) { // If not actively scrolling
                continuousRotation += 2; // Slow continuous spin
                const rect = playerSection.getBoundingClientRect();
                const viewportHeight = window.innerHeight;
                
                if (rect.top < viewportHeight && rect.bottom > 0) {
                    const sectionProgress = Math.max(0, Math.min(1, 
                        (viewportHeight - rect.top) / (viewportHeight + rect.height)
                    ));
                    
                    const horizontalOscillation = Math.sin(continuousRotation * 0.05) * 50;
                    const baseBobbing = Math.sin(Date.now() * 0.002) * 10; // Time-based gentle bobbing
                    const baseScale = 0.9 + (sectionProgress * 0.3);
                    const pulsingScale = baseScale + Math.sin(continuousRotation * 0.1) * 0.05;
                    
                    playerImage.style.transform = `
                        translateX(calc(-50% + ${horizontalOscillation}px)) 
                        translateY(${baseBobbing}px) 
                        scale(${pulsingScale}) 
                        rotate(${continuousRotation}deg)
                    `;
                    
                    playerImage.style.filter = `drop-shadow(0 0 15px rgba(255, 184, 28, 0.4)) brightness(1.05)`;
                }
            }
            scrollDirection *= 0.95; // Gradually reduce scroll direction influence
        }, 50); // 20 FPS for smooth continuous animation
    }

    // Enhanced Schedule Popup
    const schedulePopup = document.getElementById('schedule-popup');
    const scheduleOverlay = document.getElementById('schedule-popup-overlay');
    const scheduleClose = document.getElementById('schedule-popup-close');
    const downloadIcsBtn = document.getElementById('download-ics-btn');

    // Show popup after delay
    if (schedulePopup && scheduleOverlay) {
        setTimeout(() => {
            scheduleOverlay.style.display = 'block';
            schedulePopup.style.display = 'block';
            setTimeout(() => {
                scheduleOverlay.classList.add('show');
                schedulePopup.classList.add('show');
            }, 10);
        }, 2000);

        const closePopup = () => {
            scheduleOverlay.classList.remove('show');
            schedulePopup.classList.remove('show');
            setTimeout(() => {
                scheduleOverlay.style.display = 'none';
                schedulePopup.style.display = 'none';
            }, 300);
        };

        scheduleClose.addEventListener('click', closePopup);
        scheduleOverlay.addEventListener('click', closePopup);

        // ICS Download functionality
        if (downloadIcsBtn) {
            downloadIcsBtn.addEventListener('click', () => {
                // Create ICS content
                const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//UMBC Rugby//Spring 2025 Schedule//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
X-WR-CALNAME:UMBC Rugby Spring 2025
X-WR-TIMEZONE:America/New_York
BEGIN:VEVENT
DTSTART:20250301T140000
DTEND:20250301T160000
SUMMARY:UMBC Rugby vs Team 1
LOCATION:UMBC Campus Field
DESCRIPTION:Spring 2025 Season Opener
END:VEVENT
BEGIN:VEVENT
DTSTART:20250308T140000
DTEND:20250308T160000
SUMMARY:UMBC Rugby vs Team 2
LOCATION:Away Field
DESCRIPTION:Conference Match
END:VEVENT
END:VCALENDAR`;

                const blob = new Blob([icsContent], { type: 'text/calendar' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'umbc-rugby-spring-2025.ics';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);

                // Close popup after download
                setTimeout(closePopup, 1000);
            });
        }
    }


    // Enhanced FAQ Accordion
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        const answer = item.querySelector('.faq-answer');

        question.addEventListener('click', () => {
            const isActive = item.classList.contains('active');

            // Close all other items
            faqItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.classList.remove('active');
                }
            });

            // Toggle current item
            item.classList.toggle('active');

            // Smooth height animation
            if (!isActive) {
                answer.style.maxHeight = answer.scrollHeight + 'px';
            } else {
                answer.style.maxHeight = '0';
            }
        });
    });

    // Enhanced Roster Interaction
    const rosterItems = document.querySelectorAll('.roster-item');
    rosterItems.forEach(item => {
        const summary = item.querySelector('.roster-summary');

        summary.addEventListener('click', () => {
            const isExpanded = item.classList.contains('expanded');

            // Close all other items
            rosterItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.classList.remove('expanded');
                }
            });

            // Toggle current item
            item.classList.toggle('expanded');
        });
    });

    // Parallax Effect for Sections
    const parallaxElements = document.querySelectorAll('section');

    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;

        parallaxElements.forEach((element, index) => {
            const speed = 0.5 + (index * 0.1);
            const yPos = -(scrolled * speed);

            if (element.getBoundingClientRect().top < window.innerHeight &&
                element.getBoundingClientRect().bottom > 0) {
                element.style.transform = `translateY(${yPos * 0.1}px)`;
            }
        });
    });


    // Smooth Scroll for Navigation Links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));

            if (target) {
                const offsetTop = target.offsetTop - 100;

                window.scrollTo({
                    top: offsetTop,
                    behavior: 'smooth'
                });
            }
        });
    });

    // Add subtle animations to elements on hover
    const animateOnHover = (selector, animation) => {
        document.querySelectorAll(selector).forEach(element => {
            element.addEventListener('mouseenter', () => {
                element.style.animation = animation;
            });

            element.addEventListener('animationend', () => {
                element.style.animation = '';
            });
        });
    };

    animateOnHover('.cta-button', 'pulse 0.5s ease');
    animateOnHover('.role-badge', 'shake 0.5s ease');

    // Custom animations
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOutDown {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(20px);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    `;
    document.head.appendChild(style);
    
    // Initialize video transition
    initVideoTransition();
});

// Intersection Observer for Advanced Animations
const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('in-view');

            // Add stagger effect for child elements
            const children = entry.target.querySelectorAll('.animate-child');
            children.forEach((child, index) => {
                setTimeout(() => {
                    child.classList.add('in-view');
                }, index * 100);
            });
        }
    });
}, observerOptions);

// Observe all sections and special elements
document.addEventListener('DOMContentLoaded', () => {
    const elementsToObserve = document.querySelectorAll('section, .coach-card, .roster-item, .faq-item');
    elementsToObserve.forEach(el => observer.observe(el));
});

// Mobile Menu Toggle
function initMobileMenu() {
    const navbar = document.getElementById('navbar');
    const menuToggle = document.createElement('button');
    menuToggle.className = 'mobile-menu-toggle';
    menuToggle.innerHTML = '<span></span><span></span><span></span>';
    menuToggle.setAttribute('aria-label', 'Toggle navigation menu');

    // Only add mobile menu on smaller screens
    if (window.innerWidth <= 768) {
        navbar.insertBefore(menuToggle, navbar.firstChild);

        menuToggle.addEventListener('click', () => {
            navbar.classList.toggle('mobile-open');
            menuToggle.classList.toggle('active');
            document.body.style.overflow = navbar.classList.contains('mobile-open') ? 'hidden' : '';
        });

        // Close menu when clicking on a link
        const navLinks = navbar.querySelectorAll('a');
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                navbar.classList.remove('mobile-open');
                menuToggle.classList.remove('active');
                document.body.style.overflow = '';
            });
        });
    }
}

// Initialize mobile menu on load and resize
window.addEventListener('DOMContentLoaded', initMobileMenu);
window.addEventListener('resize', () => {
    const existingToggle = document.querySelector('.mobile-menu-toggle');
    if (existingToggle) existingToggle.remove();
    initMobileMenu();
});

// Performance optimization - Debounce scroll events
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Apply debouncing to scroll events
const debouncedScroll = debounce(() => {
    // Trigger scroll-based animations
    document.dispatchEvent(new Event('optimizedScroll'));
}, 10);

window.addEventListener('scroll', debouncedScroll);

// Easter Egg - Konami Code
const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
let konamiIndex = 0;

document.addEventListener('keydown', (e) => {
    if (e.key === konamiCode[konamiIndex]) {
        konamiIndex++;
        if (konamiIndex === konamiCode.length) {
            activateEasterEgg();
            konamiIndex = 0;
        }
    } else {
        konamiIndex = 0;
    }
});

function activateEasterEgg() {
    document.body.style.animation = 'rainbow 2s linear infinite';
    const easterStyle = document.createElement('style');
    easterStyle.textContent = `
        @keyframes rainbow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
    `;
    document.head.appendChild(easterStyle);

    setTimeout(() => {
        document.body.style.animation = '';
        easterStyle.remove();
    }, 5000);
}
  </script>
</body>
</html>
